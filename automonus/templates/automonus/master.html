{% load static %}
{% load mathfilters %}

<div class="row">
  <!-- Display -->
  {% if user.display %}
  <div class="col-md-4">
    <div class="card mb-4 bg-dark text-white box-shadow">
      <br>
      <p>Currently showing your costs per: <strong>{{ user.display.display_string }}</strong>. </p>
      <div class="card-body">
        <a href="{% url 'display_update' user.display.id %}" class="btn btn-sm btn-outline-light">Change the overview time period.</a>
      </div>
    </div>
  </div>
  {% else %}
  <div class="col-md-4">
    <div class="card mb-4 bg-dark text-white box-shadow">
      <br>
      <p class="text-muted">Set the default period for displaying your expense overview:</p>
      <div class="card-body">
        <form class="form text-center" action="#" method="POST">
          {% csrf_token %}
          <div class="form-group">
            <div class="form-field">
                {{ form.display }}
            </div>
          </div>
          <div class="form-group">
            <input class="btn btn-primary form-field" type="submit" value="Submit" />
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endif %}


      <!-- Housing -->
        {% if user.housing %}
          <div class="col-md-4">
            <div class="card mb-4 box-shadow">
              <h4 class="text-muted">Housing</h4>
              <div class="card-body">
                {% with operator=user.display.display_operator %}
                <p class="card-text">
                    You spend <strong>${{ user.housing.yearly_total|div:operator }}</strong> each <strong>{{ user.display.display_string }}</strong> on housing.
                </p>
                {% endwith %}
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a href="{% url 'housing_update' user.housing.id %}" type="button" class="btn btn-sm btn-outline-secondary">Update Housing</a>
                    <a href="{% url 'housing_details' user.housing.id %}" type="button" class="btn btn-sm btn-outline-secondary">Details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% else %}
            <div class="col-md-4">
              <div class="card mb-4 box-shadow">
                <h4 class="text-muted">Housing</h4>
                <div class="card-body">
                  <p>You have not yet added your housing expense information. </p>
                  <a href="{% url 'housing' %}" class="btn btn-warning">Complete the housing module.</a>
                </div>
              </div>
            </div>
        {% endif %}


      <!-- Utilities -->
        {% if user.utilities %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Utilities</h4>
            <div class="card-body">
              {% with operator=user.display.display_operator %}
              <p class="card-text">
                  You spend <strong>${{ user.utilities.yearly_total|div:operator }}</strong> each <strong>{{ user.display.display_string }}</strong> on your utilities.
              </p>
              {% endwith %}
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <a href="{% url 'utilities_update' user.utilities.id %}" type="button" class="btn btn-sm btn-outline-secondary">Update Utilities</a>
                  <a href="{% url 'utilities_details' user.utilities.id %}" type="button" class="btn btn-sm btn-outline-secondary">Details</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% else %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Utilities</h4>
            <div class="card-body">
              <p>You have not yet added your utility expenses.</p>
              <a href="{% url 'utilities' %}" class="btn btn-danger">Complete the utility expenses module.</a>
            </div>
          </div>
        </div>
        {% endif %}

</div>

<div class="row">
      <!-- Food -->
        {% if user.food %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Food</h4>
            <div class="card-body">
              {% with operator=user.display.display_operator %}
              <p class="card-text">
                  You spend <strong>${{ user.food.yearly_total|div:operator }}</strong> each <strong>{{ user.display.display_string }}</strong> on your groceries and restaurant food.
              </p>
              {% endwith %}
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <a href="{% url 'food_update' user.food.id %}" type="button" class="btn btn-sm btn-outline-secondary">Update Food</a>
                  <a href="{% url 'food_details' user.food.id %}" type="button" class="btn btn-sm btn-outline-secondary">Details</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% else %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Food</h4>
            <div class="card-body">
              <p>You have not yet entered your food expenses.</p>
              <a href="{% url 'food' %}" class="btn btn-dark">Complete the food expenses module.</a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Transportation -->
          {% if user.car %}
              <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                  <h4 class="text-muted">Transportation</h4>
                  <div class="card-body">
                    {% with operator=user.display.display_operator %}
                    <p class="card-text">
                        You spend <strong>${{ user.car.yearly_total|div:operator }}</strong> each <strong>{{ user.display.display_string }}</strong> on your transportation.
                    </p>
                    {% endwith %}
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <a href="{% url 'car_update' user.car.id %}" type="button" class="btn btn-sm btn-outline-secondary">Update Transportation</a>
                        <a href="{% url 'car_details' user.car.id %}" type="button" class="btn btn-sm btn-outline-secondary">Details</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          {% else %}
              <div class="col-md-4">
                <div class="card mb-4 box-shadow">
                  <h4 class="text-muted">Transportation</h4>
                  <div class="card-body">
                    <p class="card-text">You have not yet added your transportation expenses.</p>
                    <a href="{% url 'car' %}" class="btn btn-primary">Complete the transportation module.</a>
                  </div>
                </div>
              </div>
          {% endif %}



      <!-- Miscellaneous -->
        {% if user.miscellaneous %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Miscellaneous</h4>
            <div class="card-body">
              {% with operator=user.display.display_operator %}
              <p class="card-text">
                  You spend <strong>${{ user.miscellaneous.yearly_total|div:operator }}</strong> each <strong>{{ user.display.display_string }}</strong> on your health insurance, life insurance, and clothing.
              </p>
              {% endwith %}
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <a href="{% url 'miscellaneous_update' user.miscellaneous.id %}" type="button" class="btn btn-sm btn-block btn-outline-secondary">Update Miscellaneous</a>
                  <a href="{% url 'miscellaneous_details' user.miscellaneous.id %}" type="button" class="btn btn-sm btn-block btn-outline-secondary">Details</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% else %}
        <div class="col-md-4">
          <div class="card mb-4 box-shadow">
            <h4 class="text-muted">Miscellaneous</h4>
            <div class="card-body">
              <p>You have not yet entered your miscellaneous expenses.</p>
              <a href="{% url 'miscellaneous' %}" class="btn btn-info">Complete this module on miscellaneous expenses.</a>
            </div>
          </div>
        </div>
        {% endif %}


</div>
