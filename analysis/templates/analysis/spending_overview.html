{% extends "analysis/base.html" %}

{% if request.user.profile.has_transactions %}

{% block page_content %}
  <div class="row">
      <div class="col-lg-12 text-center">
          <div class="h1">Spending</div>
      </div>
  </div>
  <div class="row">
      <div class="col-lg-12">
          <div id="charts_container" class="mt-3"></div>
      </div>
  </div>
  <div class="row">
      <div class="col-lg-4 offset-lg-4">
        <p>Total spending this month: <b>${{ transactions_total }}</b></p>
      </div>
  </div>
  <div class="row mt-3">
      <div class="col-lg-12">
          <div class="table-responsive">
              <table id="table" class="table table-bordered">
                  <thead>
                      <tr>
                          <th>Date</th>
                          <th>Transaction</th>
                          <th>Amount</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for transaction in transactions %}
                          <tr>
                              <!-- <td>
                                {{ transaction.id }}
                              </td> -->
                              <td>
                                  {{ transaction.date|date:"m/d/Y" }}
                              </td>
                              <td>
                                  {{ transaction.name }}
                              </td>
                              <td>
                                  ${{ transaction.amount }}
                              </td>
                          </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>
  </div>
{% endblock page_content %}

{% else %}
    <p>You have not yet added an institution which is compatible with our <strong>transactions</strong> product.</p>
    <a class="btn btn-primary" href="{% url 'link_institution' %}">
        Connect A Financial Institution
    </a>
{% endif %}
