{% extends "charts/base.html" %}

{% block page_content %}
{% if request.user.profile.has_liabilities %}

  <!-- <div class="row">
    <h3>Liabilities-</h3>
    <ul>
      <li>Show credit card debt totals over time.</li>
      <li>Show student loan totals over time.</li>
    </ul>
  </div> -->
  <div class="row">
      <div class="col-lg-12 text-center">
          <div class="h1">Liabilities Overview</div>
      </div>
  </div>
  <br>
  <div class="row text-center">
      <div class="col-lg-12 ">
          <!-- TODO: If user has credit card but not student loans, will this display correctly? -->
          <h3>Student Loans</h3>
          {% if user.profile.has_student_loans_data %}
          <div id="chart_container_1" class="mt-3"></div>
          <ul class="col-sm-4 offset-sm-4">
            <li>Minimum payment amount: ${{ student_loan.minimum_payment_amount }}</li>
            <li>Interest rate percentage: {{ student_loan.interest_rate_percentage }}%</li>
            <li>Last statement balance: ${{ student_loan.last_statement_balance }}</li>
          </ul>
          {% endif %}
          <br>
          <hr>
          <br>
          <h3>Credit Card</h3>
          {% if user.profile.has_credit_card_data %}
          <div id="chart_container_2" class="mt-3"></div>
          <ul class="col-sm-4 offset-sm-4">
            <li>Minimum payment amount: ${{ credit_card.minimum_payment_amount }}</li>
            <li>Interest rate percentage: {{ apr.apr_percentage }}%</li>
            <li>Last statement balance: ${{ credit_card.last_statement_balance }}</li>
          </ul>
          {% endif %}
      </div>
  </div>

  {% if request.user.profile.has_transactions_for_liabilities %}

  <div class="row mt-3">
      <div class="col-lg-12">
          <div class="table-responsive">
              <table id="table" class="table table-bordered">
                  <thead>
                      <tr>
                          <th>Date</th>
                          <th>Transaction</th>
                          <th>Amount</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for transaction in transactions %}
                          <tr>
                              <td>
                                  {{ transaction.date|date:"m/d/Y" }}
                              </td>
                              <td>
                                  {{ transaction.name }}
                              </td>
                              <td>
                                  {{ transaction.amount }} USD
                              </td>
                          </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>
  </div>

  {% endif %}

  {% else %}

  <div class="row">
    <div class="col-lg-12 text-center">
        <p>You have not yet added an institution which is is compatible with our <strong>liabilities</strong> product.</p>
        <a class="btn btn-primary" href="{% url 'link_institution' %}">
            Connect A Financial Institution
        </a>
    </div>
  </div>

  {% endif %}
  {% endblock page_content %}
